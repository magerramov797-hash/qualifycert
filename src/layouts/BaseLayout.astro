---
import "../styles/global.css";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";

const MAINTENANCE = false; // ← ВКЛЮЧЕНО
const { title = "ISO Certification & Training", description = "ISO-сертификация, аудит и обучение персонала." } = Astro.props;
const canonicalUrl = Astro.site ? new URL(Astro.url.pathname, Astro.site) : Astro.url;
---

<!doctype html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>{title}</title>
  <meta name="description" content={description} />

 <link rel="icon" href="/favicon.ico" sizes="any" />
 <link rel="icon" type="image/png" href="/favicon.png?v=5" />


</head>

<body style="min-height:100vh; display:flex; flex-direction:column;">
  {MAINTENANCE ? (
    <main style="flex:1;">
      <slot />
    </main>
  ) : (
    <>
      <Header />
      <main style="flex:1;">
        <slot />
      </main>
      <Footer />
    </>
  )}
 <script>
  // Safe reveal-on-scroll
  const items = document.querySelectorAll(".reveal");
  if ("IntersectionObserver" in window) {
    const io = new IntersectionObserver(
      (entries) => {
        for (const e of entries) {
          if (e.isIntersecting) {
            e.target.classList.add("is-visible");
            io.unobserve(e.target);
          }
        }
      },
      { threshold: 0.12 }
    );
    items.forEach((el) => io.observe(el));
  } else {
    // fallback for old browsers
    items.forEach((el) => el.classList.add("is-visible"));
  }
 </script>
</body>
</html>
